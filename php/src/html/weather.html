<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>获取天气</title>
	<script>
	document.addEventListener('DOMContentLoaded',function(){
		/*
			接口：http://wthrcdn.etouch.cn/weather_mini?city=北京
		 */
		 // 获取元素
		var city = document.querySelector('#city');
		var btn = city.nextElementSibling;

		var xhr = new XMLHttpRequest();
		// xhr.onreadystatechange = function(){
		// 	if(xhr.readyState === 4 && (xhr.status === 200 || xhr.status === 304)){

		// 	}
		// }
		xhr.onload = function(){
			if(xhr.status === 200 || xhr.status === 304){
				var res = JSON.parse(xhr.responseText)
				console.log(res);
			}
		}
		xhr.open('get','http://wthrcdn.etouch.cn/weather_mini?city=广州',true);
		xhr.send();


		btn.onclick = function(){
			var _city = city.value;

			xhr.open('get','http://wthrcdn.etouch.cn/weather_mini?city='+_city,true);
			xhr.send();
		}
		
	})


	</script>
</head>
<body>
	<h1>天气预报</h1>
	<input type="text" id="city"><button>天气</button>
</body>
</html>